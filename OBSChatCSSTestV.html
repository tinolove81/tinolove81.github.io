<!DOCTYPE html>
<html lang='zh-tw'>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='expires' content='0'>
    <Meta http-equiv='Pragma' Content='No-cache'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
    <link href='https://bootstrap.hexschool.com/dist/css/bootstrap.css' rel='stylesheet'>
    <!-- <link href='file:///D:/VSCodeWorkSpace/CMSWebServer/css/bootstrap.min.css' rel='stylesheet'> -->
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
    <!-- <script src='file:///D:/VSCodeWorkSpace/CMSWebServer/js/jquery-3.2.1.min.js'></script> -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src='https://bootstrap.hexschool.com/dist/js/bootstrap.js'></script>
    <title>OBS Chat CSS Test</title>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            font-family: consolas, 'Microsoft JhengHei';
            background-image: url('https://pics.prcm.jp/a538fc10cb21a/47076940/jpeg/47076940.jpeg');
            background-repeat: no-repeat;
            background-position:  left center;
        }
        body {
            position: relative;
            overflow: hidden;
        }
        body > div {
            height: calc(100%);
        }
        iframe {
            display: block;
            width: 500px;
            height: 300px;
        }
        input:not(:focus),
        select:not(:focus) {
            background-color: rgba(255, 255, 255, .7) !important;
        }
        input::placeholder {
            color: rgba(170, 204, 255, .7) !important;
        }
        input::-webkit-input-placeholder {
            color: rgba(170, 204, 255, .7) !important;
        }
        input::-moz-placeholder {
            color: rgba(170, 204, 255, .7) !important;
        }
        input::-ms-input-placeholder {
            color: rgba(170, 204, 255, .7) !important;
        }

        #ModifyArea {
            overflow: auto;
        }
        #DisplayAreaBlock {
            margin-bottom: 1rem;
            overflow: hidden;
        }

        #MaskForIframe {
            position: absolute;
            margin: 0;
            padding: 0;
            color: transparent;
            background: rgba(255, 0, 0, 0);
            border: 0;
            z-index: 3;
        }

        .border-dotted {
            border-style: dotted !important;
        }

    </style>
</head>

<body class='container-fluid'>
    <div id='app' class='d-flex flex-column'>
        <div class='row h-100'>
        <!-- Detail Area -->
            <div id='ModifyArea' class='col-6 h-100'>
                <div class='row mt-2'>
                    <div class='col-12'>
                        <strong class='h5'>聊天室本體(#chat_box)</strong>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>聊天室字色</span></div>
                            <input type='text' class='form-control' placeholder='#D3D3D3' v-model.lazy='modifyData.CB_color'/>
                            <div class='input-group-append'>
                                <button class='btn btn-outline-secondary' type='button' data-toggle='collapse' data-target='#collapse_color'>
                                    <img src='data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNS40NyIgaGVpZ2h0PSIyNS40NyIgdmlld0JveD0iMCAwIDI1LjQ3IDI1LjQ3Ij48dGl0bGU+aWNvbi1pbmZvPC90aXRsZT48ZyBpZD0iU3ltYm9scyI+PGcgaWQ9IlV0aWxpdHktRHJhd2VyLVVyZ2VudC1DYXJlLUNhcmQiPjxnIGlkPSJVcmdlbnQtQ2FyZS1DYXJkIj48ZyBpZD0iVXJnZW50LTEiPjxnIGlkPSJVcmdlbnQtQ2FyZS1Ecm9wZG93bi1DVEEtIj48ZyBpZD0iQ1RBIj48ZyBpZD0ibW9yZS1pbmZvIj48cGF0aCBpZD0iQ29tYmluZWQtU2hhcGUiIGQ9Ik0xMy4xLDdhMS4zNCwxLjM0LDAsMSwwLDEuMjksMS4zMkExLjMsMS4zLDAsMCwwLDEzLjEsN1ptMCwxOC45QTEyLjQ2LDEyLjQ2LDAsMSwxLDI1LjU3LDEzLjQ2LDEyLjQ2LDEyLjQ2LDAsMCwxLDEzLjExLDI1LjkyWm0wLTEuNzFBMTAuNzUsMTAuNzUsMCwxLDAsMi4zNiwxMy40NiwxMC43NCwxMC43NCwwLDAsMCwxMy4xMSwyNC4yMVptMS4yOC01LjQ4YTEuMTgsMS4xOCwwLDAsMS0xLjI4LDEuMTgsMS4xOCwxLjE4LDAsMCwxLTEuMjktMS4xOFYxMi41YTEuMTcsMS4xNywwLDAsMSwxLjI2LTEuMTksMS4xOSwxLjE5LDAsMCwxLDEuMzEsMS4xOVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjM3IC0wLjczKSIgc3R5bGU9ImZpbGw6IzM3NWE4ZjtzdHJva2U6I2ZmZjtzdHJva2Utd2lkdGg6MC41NDgzMzgzNTM2MzM4ODA2cHgiLz48L2c+PC9nPjwvZz48L2c+PC9nPjwvZz48L2c+PC9zdmc+' style='width: 1rem;'/>
                                </button>
                            </div>
                        </div>
                        <div id='collapse_color' class='collapse'>
                            <div class='card card-body'>
                                <table class='table table-sm table-bordered m-0'>
                                    <tr><td>顏色名稱(color name)</td><td>瀏覽器支援內建名稱(browsers support the 140 color names)<br/>(ex. red, blue, white, black, transparent...)</td></tr>
                                    <tr><td rowspan='4'>顏色代碼(color code)</td><td>HEX Value: #AACCFF = #ACF</td></tr>
                                    <tr><td>RGB color: rgb(255, 255, 255)</td></tr>
                                    <tr><td>RGBA color: rgba(255, 255, 255, 1)</td></tr>
                                    <tr><td>HSL color: HSL(240, 100%, 50%)</td></tr>
                                </table>
                            </div>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>聊天室背景色</span></div>
                            <input type='text' class='form-control' placeholder='transparent' v-model.lazy='modifyData.CB_bgcolor'/>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>聊天室字體大小</span></div>
                            <input type='text' class='form-control' placeholder='13' v-model.lazy='modifyData.CB_fontsize'/>
                            <div class='input-group-append'><span class='input-group-text'>px</span></div>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>聊天室字體粗細</span></div>
                            <select class='custom-select custom-select-sm' v-model.lazy='modifyData.CB_fontwidth'>
                                <option value='normal' selected>預設</option>
                                <option value='bold'>粗體</option>
                            </select>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>聊天室字型</span></div>
                            <input type='text' class='form-control' placeholder='"Helvetica Neue", Helvetica, Arial, sans-serif' v-model.lazy='modifyData.CB_fomefamily'/>
                            <div class='input-group-append'>
                                <button class='btn btn-outline-secondary' type='button' data-toggle='collapse' data-target='#collapse_fontfamily'>
                                    <img src='data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNS40NyIgaGVpZ2h0PSIyNS40NyIgdmlld0JveD0iMCAwIDI1LjQ3IDI1LjQ3Ij48dGl0bGU+aWNvbi1pbmZvPC90aXRsZT48ZyBpZD0iU3ltYm9scyI+PGcgaWQ9IlV0aWxpdHktRHJhd2VyLVVyZ2VudC1DYXJlLUNhcmQiPjxnIGlkPSJVcmdlbnQtQ2FyZS1DYXJkIj48ZyBpZD0iVXJnZW50LTEiPjxnIGlkPSJVcmdlbnQtQ2FyZS1Ecm9wZG93bi1DVEEtIj48ZyBpZD0iQ1RBIj48ZyBpZD0ibW9yZS1pbmZvIj48cGF0aCBpZD0iQ29tYmluZWQtU2hhcGUiIGQ9Ik0xMy4xLDdhMS4zNCwxLjM0LDAsMSwwLDEuMjksMS4zMkExLjMsMS4zLDAsMCwwLDEzLjEsN1ptMCwxOC45QTEyLjQ2LDEyLjQ2LDAsMSwxLDI1LjU3LDEzLjQ2LDEyLjQ2LDEyLjQ2LDAsMCwxLDEzLjExLDI1LjkyWm0wLTEuNzFBMTAuNzUsMTAuNzUsMCwxLDAsMi4zNiwxMy40NiwxMC43NCwxMC43NCwwLDAsMCwxMy4xMSwyNC4yMVptMS4yOC01LjQ4YTEuMTgsMS4xOCwwLDAsMS0xLjI4LDEuMTgsMS4xOCwxLjE4LDAsMCwxLTEuMjktMS4xOFYxMi41YTEuMTcsMS4xNywwLDAsMSwxLjI2LTEuMTksMS4xOSwxLjE5LDAsMCwxLDEuMzEsMS4xOVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjM3IC0wLjczKSIgc3R5bGU9ImZpbGw6IzM3NWE4ZjtzdHJva2U6I2ZmZjtzdHJva2Utd2lkdGg6MC41NDgzMzgzNTM2MzM4ODA2cHgiLz48L2c+PC9nPjwvZz48L2c+PC9nPjwvZz48L2c+PC9zdmc+' style='width: 1rem;'/>
                                </button>
                            </div>
                        </div>
                        <div id='collapse_fontfamily' class='collapse'>
                            <div class='card card-body'>
                                <table class='table table-sm table-bordered m-0'>
                                    <tr style='font-family: "Helvetica Neue";'><td>"Helvetica Neue"</td><td>A sleeping cat. 有一隻正在睡覺的貓. 猫が眠ります.</td></tr>
                                    <tr style='font-family: Arial;'><td>Arial</td><td>A sleeping cat. 有一隻正在睡覺的貓. 猫が眠ります.</td></tr>
                                    <tr style='font-family: consolas;'><td>consolas</td><td>A sleeping cat. 有一隻正在睡覺的貓. 猫が眠ります.</td></tr>
                                    <tr style='font-family: Meiryo;'><td>Meiryo</td><td>A sleeping cat. 有一隻正在睡覺的貓. 猫が眠ります.</td></tr>
                                    <tr style='font-family: "Microsoft JhengHei";'><td>"Microsoft JhengHei"</td><td>A sleeping cat. 有一隻正在睡覺的貓. 猫が眠ります.</td></tr>
                                    <tr style='font-family: "Microsoft YaHei";'><td>"Microsoft YaHei"</td><td>A sleeping cat. 有一隻正在睡覺的貓. 猫が眠ります.</td></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='row mt-2'>
                    <div class='col-12'>
                        <strong class='h5'>聊天室每一行(.chat_line)</strong>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>單行分隔</span></div>
                            <select class='custom-select custom-select-sm' v-model.lazy='modifyData.CL_display'>
                                <option value='block' selected>預設</option>
                                <option value='flex'>分隔暱稱及訊息</option>
                            </select>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>單行邊界</span></div>
                            <input type='text' class='form-control' placeholder='2' v-model.lazy='modifyData.CL_margin'/>
                            <div class='input-group-append'><span class='input-group-text'>px</span></div>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>單行字元間距</span></div>
                            <input type='text' class='form-control' placeholder='1' v-model.lazy='modifyData.CL_lineheight'/>
                            <div class='input-group-append'><span class='input-group-text'>em</span></div>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>單行動畫</span></div>
                            <input type='text' class='form-control' v-model.lazy='modifyData.CL_animation'/>
                            <div class='input-group-append'>
                                <button class='btn btn-outline-secondary' type='button' data-toggle='collapse' data-target='#collapse_animation'>
                                    <img src='data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNS40NyIgaGVpZ2h0PSIyNS40NyIgdmlld0JveD0iMCAwIDI1LjQ3IDI1LjQ3Ij48dGl0bGU+aWNvbi1pbmZvPC90aXRsZT48ZyBpZD0iU3ltYm9scyI+PGcgaWQ9IlV0aWxpdHktRHJhd2VyLVVyZ2VudC1DYXJlLUNhcmQiPjxnIGlkPSJVcmdlbnQtQ2FyZS1DYXJkIj48ZyBpZD0iVXJnZW50LTEiPjxnIGlkPSJVcmdlbnQtQ2FyZS1Ecm9wZG93bi1DVEEtIj48ZyBpZD0iQ1RBIj48ZyBpZD0ibW9yZS1pbmZvIj48cGF0aCBpZD0iQ29tYmluZWQtU2hhcGUiIGQ9Ik0xMy4xLDdhMS4zNCwxLjM0LDAsMSwwLDEuMjksMS4zMkExLjMsMS4zLDAsMCwwLDEzLjEsN1ptMCwxOC45QTEyLjQ2LDEyLjQ2LDAsMSwxLDI1LjU3LDEzLjQ2LDEyLjQ2LDEyLjQ2LDAsMCwxLDEzLjExLDI1LjkyWm0wLTEuNzFBMTAuNzUsMTAuNzUsMCwxLDAsMi4zNiwxMy40NiwxMC43NCwxMC43NCwwLDAsMCwxMy4xMSwyNC4yMVptMS4yOC01LjQ4YTEuMTgsMS4xOCwwLDAsMS0xLjI4LDEuMTgsMS4xOCwxLjE4LDAsMCwxLTEuMjktMS4xOFYxMi41YTEuMTcsMS4xNywwLDAsMSwxLjI2LTEuMTksMS4xOSwxLjE5LDAsMCwxLDEuMzEsMS4xOVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjM3IC0wLjczKSIgc3R5bGU9ImZpbGw6IzM3NWE4ZjtzdHJva2U6I2ZmZjtzdHJva2Utd2lkdGg6MC41NDgzMzgzNTM2MzM4ODA2cHgiLz48L2c+PC9nPjwvZz48L2c+PC9nPjwvZz48L2c+PC9zdmc+' style='width: 1rem;'/>
                                </button>
                            </div>
                        </div>
                        <div id='collapse_animation' class='collapse'>
                            <div class='card card-body'>
                                <table class='table table-sm table-bordered m-0'>
                                    <tr><td>想到再做</td></tr>
                                    <tr><td>//slideInRight .6s cubic-bezier(.2, 1, .3, 1);</td></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='row mt-2'>
                    <div class='col-12'>
                        <strong class='h5'>單行暱稱(.nick)</strong>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>背景色</span></div>
                            <input type='text' class='form-control' placeholder='transparent' v-model.lazy='modifyData.CLN_bgcolor'/>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>陰影</span></div>
                            <div class='input-group-prepend'>
                                <div class='input-group-text'><input type='checkbox' v-model.lazy='modifyData.CLN_shadow_cb'/></div>
                            </div>
                            <div class='input-group-prepend'>
                                <span class='input-group-text'>粗細</span>
                            </div>
                            <input type='text' class='form-control' placeholder='1' v-model.lazy='modifyData.CLN_shadowwidth'/>
                            <div class='input-group-append'><span class='input-group-text'>px</span></div>
                            <div class='input-group-prepend'>
                                <span class='input-group-text'>擴散</span>
                            </div>
                            <input type='text' class='form-control' placeholder='1' v-model.lazy='modifyData.CLN_shadowblur'/>
                            <div class='input-group-append'><span class='input-group-text'>px</span></div>
                            <div class='input-group-prepend'>
                                <span class='input-group-text'>顏色</span>
                            </div>
                            <input type='text' class='form-control' placeholder='#000000' v-model.lazy='modifyData.CLN_shadowcolor'/>
                        </div>
                    </div>
                </div>
                <div class='row my-2'>
                    <div class='col-12'>
                        <strong class='h5'>聊天內容(.message)</strong>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>字色</span></div>
                            <input type='text' class='form-control' placeholder='#D3D3D3' v-model.lazy='modifyData.CLM_color'/>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>背景色</span></div>
                            <input type='text' class='form-control' placeholder='transparent' v-model.lazy='modifyData.CLM_bgcolor'/>
                        </div>
                        <div class='input-group input-group-sm'>
                        <div class='input-group-prepend'><span class='input-group-text'>陰影</span></div>
                            <div class='input-group-prepend'>
                                <div class='input-group-text'><input type='checkbox' v-model.lazy='modifyData.CLM_shadow_cb' /></div>
                            </div>
                            <div class='input-group-prepend'>
                                <span class='input-group-text'>粗細</span>
                            </div>
                            <input type='text' class='form-control' placeholder='1' v-model.lazy='modifyData.CLM_shadowwidth'/>
                            <div class='input-group-append'><span class='input-group-text'>px</span></div>
                            <div class='input-group-prepend'>
                                <span class='input-group-text'>擴散</span>
                            </div>
                            <input type='text' class='form-control' placeholder='1' v-model.lazy='modifyData.CLM_shadowblur'/>
                            <div class='input-group-append'><span class='input-group-text'>px</span></div>
                            <div class='input-group-prepend'>
                                <span class='input-group-text'>顏色</span>
                            </div>
                            <input type='text' class='form-control' placeholder='#000000' v-model.lazy='modifyData.CLM_shadowcolor'/>
                        </div>
                    </div>
                </div>
                <div class='row mt-2 d-none'>
                    <div class='col-12'></div>
                </div>
            </div>
        <!-- /Detail Area -->

        <!-- Display Area -->
            <div id='DisplayArea' class='col-6 d-flex flex-column'>
                <div class='row mt-2'>
                    <div class='col-12 d-flex'>
                        <div class='btn-group btn-group-sm btn-group-toggle'>
                            <label class='btn btn-outline-primary' v-bind:class='[displayData.blockProp.bgcolor.background == "white" ? "active" : ""]'><input type='radio' name='DisplayBGRadio' v-model='displayData.blockProp.bgcolor.background' value='white'/>White</label>
                            <label class='btn btn-outline-primary' v-bind:class='[displayData.blockProp.bgcolor.background == "black" ? "active" : ""]'><input type='radio' name='DisplayBGRadio' v-model='displayData.blockProp.bgcolor.background' value='black'/>Black</label>
                            <label class='btn btn-outline-primary' v-bind:class='[displayData.blockProp.bgcolor.background == "yellow" ? "active" : ""]'><input type='radio' name='DisplayBGRadio' v-model='displayData.blockProp.bgcolor.background' value='yellow'/>Yellow</label>
                        </div>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend ml-1'><span class='input-group-text'>Width</span></div>
                            <input type='text' class='form-control' placeholder='500' v-model.lazy='displayData.iframeProp.width'/>
                            <div class='input-group-prepend'><span class='input-group-text'>Height</span></div>
                            <input type='text' class='form-control' placeholder='300' v-model.lazy='displayData.iframeProp.height'/>
                        </div>
                        <button class='btn btn-success btn-sm ml-1' type='button' v-on:click='DisplayAreaSubmit'>Submit</button>
                        <button class='btn btn-outline-warning btn-sm ml-1' type='button' v-on:click='DisplayAreaCancel'>Reset</button>
                    </div>
                </div>
                <div class='row mt-2 flex-grow-1'>
                    <div class='col-12'>
                        <div id='DisplayAreaBlock' class='position-relative w-100 h-100 border' v-bind:style='displayData.blockProp.bgcolor'>
                            <iframe id='DisplayAreaIframe' class='position-absolute border border-dotted' src='' v-on:load='DisplayAreaIframeLoad'></iframe>
                        </div>
                    </div>
                </div>
                <div class='row my-2'>
                    <div class='col-12'>
                        <strong class='h5'>複製程式碼</strong>
                        <div class='input-group input-group-sm'>
                            <div class='input-group-prepend'><span class='input-group-text'>自訂CSS</span></div>
                            <input type='text' id='CSS_code' class='form-control'/>
                            <div class='input-group-append'>
                                <button class='btn btn-primary' type='button' v-on:click='DisplayAreaCopy'>Copy</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <!-- /Display Area -->

        </div>
        <div id='MaskForIframe' v-on:mousemove='MaskMouseMove' v-on:mousedown='MaskMouseDown' v-on:mouseup='MaskMouseUp' v-on:mouseleave='MaskMouseLeave'></div>
    </div>

    <script>
        let app = new Vue({
            el: '#app',
            data: {
                '__elementDargging': null,
                '__mousePos': null,
                'modifyData': {
                    'CB_color': '#D3D3D3',
                    'CB_bgcolor': 'transparent',
                    'CB_fontsize': 13,
                    'CB_fontwidth': 'normal',
                    'CB_fomefamily': '"Helvetica Neue", Helvetica, Arial, sans-serif',
                    'CL_display': 'block',
                    'CL_margin': 2,
                    'CL_lineheight': 1,
                    'CL_animation': '',
                    'CLN_bgcolor': 'transparent',
                    'CLN_shadow_cb': false,
                    'CLN_shadowwidth': 1,
                    'CLN_shadowblur': 1,
                    'CLN_shadowcolor': '#000000',
                    'CLM_color': '#D3D3D3',
                    'CLM_bgcolor': 'transparent',
                    'CLM_shadow_cb': false,
                    'CLM_shadowwidth': 1,
                    'CLM_shadowblur': 1,
                    'CLM_shadowcolor': '#000000'
                },
                'displayData': {
                    'blockProp': {
                        'top': '',
                        'right': '',
                        'bottom': '',
                        'left': '',
                        'bgcolor': {'background': 'white'},
                    },
                    'iframeProp': {
                        'onload': false,
                        'src': location.toString().replace(/Test(.*)\.html/, 'Example\.html'),
                        'width': 500,
                        'height': 300
                    }
                }
            },
            mounted: function () {
                console.log('init');
                window.addEventListener('resize', this.WindowResize);
                this.WindowResize();
            },
            computed: {
                CreateCSS: function () {
                    let css = '#chat_box {';
                    css += `color: ${this.modifyData.CB_color || '#D3D3D3'};`;
                    css += `background: ${this.modifyData.CB_bgcolor || 'transparent'};`;
                    css += `font-size: ${this.modifyData.CB_fontsize || '13'}px;`;
                    css += `font-weight: ${this.modifyData.CB_fontwidth || 'normal'};`;
                    css += `font-family: ${this.modifyData.CB_fomefamily || '"Helvetica Neue", Helvetica, Arial, sans-serif'};`;
                    css += '}';
                    css += '.chat_line {';
                    css += `display: ${this.modifyData.CL_display};`;
                    css += `margin: ${this.modifyData.CL_margin || '2'}px;`;
                    css += 'padding: 0;';
                    css += `line-height: ${this.modifyData.CL_lineheight || '1'}em;`;
                    css += `animation: ${this.modifyData.CL_animation || '0'};`;
                    css += '}';
                    css += '.chat_line .nick {';
                    css += `background: ${this.modifyData.CLN_bgcolor || 'transparent'};`;
                    if (this.modifyData.CLN_shadow_cb) {
                        let sw = `${this.modifyData.CLN_shadowwidth || '1'}px`;
                        let sb = `${this.modifyData.CLN_shadowblur || '1'}px`;
                        let sc = `${this.modifyData.CLN_shadowcolor || 'black'}`;
                        css += 'text-shadow: ';
                        css += `0 -${sw} ${sb} ${sc},`;
                        css += `${sw} -${sw} ${sb} ${sc},`;
                        css += `${sw} 0 ${sb} ${sc},`;
                        css += `${sw} ${sw} ${sb} ${sc},`;
                        css += `0 ${sw} ${sb} ${sc},`;
                        css += `-${sw} ${sw} ${sb} ${sc},`;
                        css += `-${sw} 0 ${sb} ${sc},`;
                        css += `-${sw} -${sw} ${sb} ${sc}`;
                        css += ';';
                    }
                    css += '}';
                    css += '.chat_line .message {';
                    css += `color: ${this.modifyData.CLM_color || '#D3D3D3'};`;
                    css += `background: ${this.modifyData.CLM_bgcolor || 'transparent'};`;
                    if (this.modifyData.CLM_shadow_cb) {
                        let sw = `${this.modifyData.CLM_shadowwidth || '1'}px`;
                        let sb = `${this.modifyData.CLM_shadowblur || '1'}px`;
                        let sc = `${this.modifyData.CLM_shadowcolor || 'black'}`;
                        css += 'text-shadow: ';
                        css += `0 -${sw} ${sb} ${sc},`;
                        css += `${sw} -${sw} ${sb} ${sc},`;
                        css += `${sw} 0 ${sb} ${sc},`;
                        css += `${sw} ${sw} ${sb} ${sc},`;
                        css += `0 ${sw} ${sb} ${sc},`;
                        css += `-${sw} ${sw} ${sb} ${sc},`;
                        css += `-${sw} 0 ${sb} ${sc},`;
                        css += `-${sw} -${sw} ${sb} ${sc}`;
                        css += ';';
                    }
                    css += '}';
                    return css;
                }
            },
            methods: {
                WindowResize: function (e) {
                    let iframe = this.$el.querySelector('iframe');
                    this.displayData.blockProp.top = iframe.parentElement.getBoundingClientRect().top;
                    this.displayData.blockProp.right = iframe.parentElement.getBoundingClientRect().right;
                    this.displayData.blockProp.bottom = iframe.parentElement.getBoundingClientRect().bottom;
                    this.displayData.blockProp.left = iframe.parentElement.getBoundingClientRect().left;
                    
                    this.MaskPos();
                },
                DisplayAreaSubmit: function () {
                    console.log('DisplayAreaSubmit');
                    let iframe = this.$el.querySelector('iframe');
                    this.displayData.iframeProp.onload = true;
    	            iframe.style.width = this.displayData.iframeProp.width + 'px';
    	            iframe.style.height = this.displayData.iframeProp.height + 'px';
    	            iframe.src = this.displayData.iframeProp.src;
                },
                DisplayAreaCancel: function () {
                    console.log('DisplayAreaCancel');
                    let iframe = this.$el.querySelector('iframe');
                    this.displayData.iframeProp.onload = false;
    	            iframe.style.width = this.displayData.iframeProp.width + 'px';
    	            iframe.style.height = this.displayData.iframeProp.height + 'px';
    	            iframe.src = this.displayData.iframeProp.src;
                },
                DisplayAreaIframeLoad: function () {
                    if (!this.displayData.iframeProp.onload) return false;
                    let style = document.createElement('style');
                    let cssText = document.createTextNode(this.CreateCSS);
                    style.appendChild(cssText);
                    this.$el.querySelector('iframe').contentDocument.head.appendChild(style);
                    this.$el.querySelector('#CSS_code').value = this.CreateCSS;
                    this.$el.querySelector('#CSS_code').select();
                },
                DisplayAreaCopy: function () {
                    this.$el.querySelector('#CSS_code').select();
                    document.execCommand('copy');
                },
                MaskPos: function () {
                    let iframe = this.$el.querySelector('iframe');
                    let mask = this.$el.querySelector('#MaskForIframe');
                    mask.style.top = this.displayData.blockProp.top + 'px';
                    mask.style.left = this.displayData.blockProp.left + 'px';
                    mask.style.width = this.displayData.iframeProp.width + 'px';
                    mask.style.height = this.displayData.iframeProp.height + 'px';
                    iframe.style.top = 0;
                    iframe.style.left = 0;
                },
                MaskMouseMove: function (e) {
                    if (this.__elementDargging) {
                        let iframe = this.$el.querySelector('iframe');
                        let mask = this.__elementDargging;
                        let mp = this.__mousePos;
                        let rangeTop = this.displayData.blockProp.top;
                        let rangeBottom = this.displayData.blockProp.bottom;
                        let rangeLeft = this.displayData.blockProp.left;
                        let rangeRight = this.displayData.blockProp.right;
                        if (mask.getBoundingClientRect().top + (e.clientY - mp['top']) < rangeTop) {
                            mask.style.top = rangeTop + 'px';
                            iframe.style.top = 0;
                        } else if (mask.getBoundingClientRect().top + (e.clientY - mp['top']) + mask.clientHeight > rangeBottom) {
                            mask.style.top = (rangeBottom - mask.clientHeight) + 'px';
                            iframe.style.top = (iframe.parentElement.clientHeight - iframe.clientHeight) + 'px';
                        } else {
                            mask.style.top = mask.offsetTop + (e.clientY - mp['top']) + 'px';
                            iframe.style.top = iframe.offsetTop + (e.clientY - mp['top']) + 'px';
                        }

                        if (mask.getBoundingClientRect().left + (e.clientX - mp['left']) < rangeLeft) {
                            mask.style.left = rangeLeft + 'px';
                            iframe.style.left = 0;
                        } else if (mask.getBoundingClientRect().left + (e.clientX - mp['left']) + mask.clientWidth > rangeRight) {
                            mask.style.left = (rangeRight - mask.clientWidth) + 'px';
                            iframe.style.left = (iframe.parentElement.clientWidth - iframe.clientWidth) + 'px';
                        } else {
                            mask.style.left = mask.offsetLeft + (e.clientX - mp['left']) + 'px';
                            iframe.style.left = iframe.offsetLeft + (e.clientX - mp['left']) + 'px';
                        }
                        
                        // if ($Dargging.offset()['left'] + (e.clientX - mouse_pos['left']) < left_border) {
                        //     $Dargging.css('left', left_border);
                        //     $iframe.css('left', 0);
                        // } else if ($Dargging.offset()['left'] + (e.clientX - mouse_pos['left']) + $Dargging.outerWidth() > right_border) {
                        //     $Dargging.css('left', right_border - $Dargging.outerWidth());
                        //     $iframe.css('left', $iframe.parent().outerWidth() - $iframe.outerWidth());
                        // } else {
                        //     $Dargging.css('left', '+=' + (e.clientX - mouse_pos['left']));
                        //     $iframe.css('left', '+=' + (e.clientX - mouse_pos['left']));
                        // }
                        this.__mousePos = {
                            'top': e.clientY,
                            'left': e.clientX
                        };
                    }
                },
                MaskMouseDown: function (e) {
                    this.__elementDargging = e.target;
                    this.__mousePos = {
                        'top': e.clientY,
                        'left': e.clientX
                    };
                },
                MaskMouseUp: function () {
                    this.__elementDargging = null;
                    this.__mousePos = null;
                },
                MaskMouseLeave: function () {
                    this.__elementDargging = null;
                    this.__mousePos = null;
                },
            }
        });


        /*
        $mask.on('mousemove', function (e) {
            if ($Dargging) {
                let top_border = $iframe.parent().offset()['top'];
                let right_border = $iframe.parent().offset()['left'] + $iframe.parent().outerWidth();
                let buttom_border = $iframe.parent().offset()['top'] + $iframe.parent().outerHeight();
                let left_border = $iframe.parent().offset()['left'];

                if ($Dargging.offset()['top'] + (e.clientY - mouse_pos['top']) < top_border) {
                    $Dargging.css('top', top_border);
                    $iframe.css('top', 0);
                } else if ($Dargging.offset()['top'] + (e.clientY - mouse_pos['top']) + $Dargging.outerHeight() > buttom_border) {
                    $Dargging.css('top', buttom_border - $Dargging.outerHeight());
                    $iframe.css('top', $iframe.parent().outerHeight() - $iframe.outerHeight());
                } else {
                    $Dargging.css('top', '+=' + (e.clientY - mouse_pos['top']));
                    $iframe.css('top', '+=' + (e.clientY - mouse_pos['top']));
                }

                if ($Dargging.offset()['left'] + (e.clientX - mouse_pos['left']) < left_border) {
                    $Dargging.css('left', left_border);
                    $iframe.css('left', 0);
                } else if ($Dargging.offset()['left'] + (e.clientX - mouse_pos['left']) + $Dargging.outerWidth() > right_border) {
                    $Dargging.css('left', right_border - $Dargging.outerWidth());
                    $iframe.css('left', $iframe.parent().outerWidth() - $iframe.outerWidth());
                } else {
                    $Dargging.css('left', '+=' + (e.clientX - mouse_pos['left']));
                    $iframe.css('left', '+=' + (e.clientX - mouse_pos['left']));
                }

                mouse_pos = {
                    'top': e.clientY,
                    'left': e.clientX
                };
            }
        });
        $mask.on('mousedown', function (e) {
            $Dargging = $(e.target);
            mouse_pos = {
                'top': e.clientY,
                'left': e.clientX
            };
        });
        $mask.on('mouseup', function (e) {
            $Dargging = null;
            mouse_pos = null;
        });
        $mask.on('mouseleave', function (e) {
            $Dargging = null;
            mouse_pos = null;
        });
        */
    </script>
</body>

</html>